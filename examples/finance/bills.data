{
  "@context": { "fin": "https://finance.local/" },
  "@id": "fin:bills",
  "@type": "BillCollection",

  "recurring": [
    {
      "id": "bill-rent",
      "name": "Rent",
      "amount": 1650,
      "dueDay": 1,
      "frequency": "monthly",
      "category": "housing",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-electric",
      "name": "Electric",
      "amount": 85,
      "dueDay": 15,
      "frequency": "monthly",
      "category": "utilities",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-gas",
      "name": "Gas",
      "amount": 45,
      "dueDay": 20,
      "frequency": "monthly",
      "category": "utilities",
      "autopay": false,
      "account": "acc-checking"
    },
    {
      "id": "bill-internet",
      "name": "Internet",
      "amount": 70,
      "dueDay": 10,
      "frequency": "monthly",
      "category": "utilities",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-phone",
      "name": "Phone",
      "amount": 45,
      "dueDay": 22,
      "frequency": "monthly",
      "category": "utilities",
      "autopay": true,
      "account": "acc-credit"
    },
    {
      "id": "bill-insurance-car",
      "name": "Car Insurance",
      "amount": 125,
      "dueDay": 5,
      "frequency": "monthly",
      "category": "transport",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-insurance-health",
      "name": "Health Insurance",
      "amount": 150,
      "dueDay": 1,
      "frequency": "monthly",
      "category": "health",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-insurance-renters",
      "name": "Renters Insurance",
      "amount": 25,
      "dueDay": 1,
      "frequency": "monthly",
      "category": "housing",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-gym",
      "name": "Gym Membership",
      "amount": 40,
      "dueDay": 10,
      "frequency": "monthly",
      "category": "health",
      "autopay": true,
      "account": "acc-checking"
    },
    {
      "id": "bill-credit",
      "name": "Credit Card Payment",
      "amount": 500,
      "dueDay": 25,
      "frequency": "monthly",
      "category": "debt",
      "autopay": false,
      "account": "acc-checking"
    }
  ],

  "subscriptions": [
    { "id": "sub-netflix", "name": "Netflix", "amount": 15.99, "frequency": "monthly", "category": "entertainment", "autopay": true },
    { "id": "sub-spotify", "name": "Spotify", "amount": 10.99, "frequency": "monthly", "category": "entertainment", "autopay": true },
    { "id": "sub-icloud", "name": "iCloud Storage", "amount": 2.99, "frequency": "monthly", "category": "tech", "autopay": true },
    { "id": "sub-1password", "name": "1Password", "amount": 35.88, "frequency": "yearly", "category": "tech", "autopay": true },
    { "id": "sub-youtube", "name": "YouTube Premium", "amount": 13.99, "frequency": "monthly", "category": "entertainment", "autopay": true },
    { "id": "sub-chatgpt", "name": "ChatGPT Plus", "amount": 20, "frequency": "monthly", "category": "tech", "autopay": true },
    { "id": "sub-nytimes", "name": "NY Times", "amount": 4, "frequency": "weekly", "category": "news", "autopay": true },
    { "id": "sub-github", "name": "GitHub Pro", "amount": 4, "frequency": "monthly", "category": "tech", "autopay": true }
  ],

  "annualPayments": [
    { "id": "annual-domain1", "name": "Personal Domain (.com)", "amount": 12, "dueDate": "2024-08-15", "category": "tech" },
    { "id": "annual-domain2", "name": "Business Domain (.io)", "amount": 45, "dueDate": "2024-11-01", "category": "tech" },
    { "id": "annual-amazon", "name": "Amazon Prime", "amount": 139, "dueDate": "2024-06-20", "category": "shopping" },
    { "id": "annual-costco", "name": "Costco Membership", "amount": 65, "dueDate": "2024-09-01", "category": "shopping" },
    { "id": "annual-aaa", "name": "AAA Membership", "amount": 89, "dueDate": "2024-04-15", "category": "transport" },
    { "id": "annual-dmv", "name": "Vehicle Registration", "amount": 285, "dueDate": "2024-09-15", "category": "transport" },
    { "id": "annual-professional", "name": "Professional License", "amount": 150, "dueDate": "2024-12-31", "category": "career" }
  ],

  "monthlyRecurring": {
    "@expr": "recurring.map(b => b.amount).reduce((a, b) => a + b, 0)"
  },
  "monthlySubscriptions": {
    "@expr": "subscriptions.map(s => s.frequency == 'yearly' ? s.amount / 12 : (s.frequency == 'weekly' ? s.amount * 4.33 : s.amount)).reduce((a, b) => a + b, 0)"
  },
  "monthlyAnnualizedPayments": {
    "@expr": "annualPayments.map(a => a.amount / 12).reduce((a, b) => a + b, 0)"
  },

  "totalMonthly": { "@expr": "monthlyRecurring + monthlySubscriptions + monthlyAnnualizedPayments" },
  "totalMonthlyFormatted": { "@expr": "$currency(totalMonthly)" },

  "totalAnnual": { "@expr": "totalMonthly * 12" },
  "totalAnnualFormatted": { "@expr": "$currency(totalAnnual)" },

  "autopayCount": { "@expr": "recurring.filter(b => b.autopay).length + subscriptions.filter(s => s.autopay).length" },
  "manualCount": { "@expr": "recurring.filter(b => !b.autopay).length" },

  "subscriptionCount": { "@expr": "subscriptions.length" },
  "recurringCount": { "@expr": "recurring.length" },
  "annualCount": { "@expr": "annualPayments.length" }
}
