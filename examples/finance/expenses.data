{
  "@context": { "fin": "https://finance.local/" },
  "@id": "fin:expenses",
  "@type": "ExpenseCollection",

  "categories": [
    {
      "id": "cat-housing",
      "name": "Housing",
      "type": "fixed",
      "budgeted": 1800,
      "items": [
        { "name": "Rent", "amount": 1650, "frequency": "monthly" },
        { "name": "Renters Insurance", "amount": 25, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-utilities",
      "name": "Utilities",
      "type": "variable",
      "budgeted": 250,
      "items": [
        { "name": "Electric", "amount": 85, "frequency": "monthly" },
        { "name": "Gas", "amount": 45, "frequency": "monthly" },
        { "name": "Internet", "amount": 70, "frequency": "monthly" },
        { "name": "Phone", "amount": 45, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-food",
      "name": "Food",
      "type": "variable",
      "budgeted": 600,
      "items": [
        { "name": "Groceries", "amount": 400, "frequency": "monthly" },
        { "name": "Dining Out", "amount": 150, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-transport",
      "name": "Transportation",
      "type": "variable",
      "budgeted": 350,
      "items": [
        { "name": "Gas", "amount": 120, "frequency": "monthly" },
        { "name": "Car Insurance", "amount": 125, "frequency": "monthly" },
        { "name": "Maintenance", "amount": 50, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-health",
      "name": "Health",
      "type": "fixed",
      "budgeted": 200,
      "items": [
        { "name": "Health Insurance", "amount": 150, "frequency": "monthly" },
        { "name": "Gym", "amount": 40, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-savings",
      "name": "Savings & Investments",
      "type": "fixed",
      "budgeted": 500,
      "items": [
        { "name": "Emergency Fund", "amount": 200, "frequency": "monthly" },
        { "name": "Brokerage", "amount": 300, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-personal",
      "name": "Personal",
      "type": "variable",
      "budgeted": 200,
      "items": [
        { "name": "Clothing", "amount": 75, "frequency": "monthly" },
        { "name": "Personal Care", "amount": 50, "frequency": "monthly" }
      ]
    },
    {
      "id": "cat-entertainment",
      "name": "Entertainment",
      "type": "discretionary",
      "budgeted": 150,
      "items": [
        { "name": "Hobbies", "amount": 100, "frequency": "monthly" },
        { "name": "Events", "amount": 50, "frequency": "monthly" }
      ]
    }
  ],

  "totalBudgeted": { "@expr": "categories.map(c => c.budgeted).reduce((a, b) => a + b, 0)" },
  "totalBudgetedFormatted": { "@expr": "$currency(totalBudgeted)" },

  "fixedExpenses": {
    "@expr": "categories.filter(c => c.type == 'fixed').map(c => c.budgeted).reduce((a, b) => a + b, 0)"
  },
  "variableExpenses": {
    "@expr": "categories.filter(c => c.type == 'variable').map(c => c.budgeted).reduce((a, b) => a + b, 0)"
  },
  "discretionaryExpenses": {
    "@expr": "categories.filter(c => c.type == 'discretionary').map(c => c.budgeted).reduce((a, b) => a + b, 0)"
  },

  "categoryCount": { "@expr": "categories.length" }
}
